# SubscriberLifecycle

Необходимо создать backend приложение, используя Spring MVC и Java 8 или Kotlin
(Stream API, lambdas, java.time), которое бы реагировало на разные события,
вызываемые REST-запросами.
Основная сущность – это абонент (Subscriber), у него, как минимум, есть имя,
фамилия, номер телефона (msisdn), баланс и статус. Считаем, что статус может иметь
два состояния – Active и Blocked. В статусе «заблокирован» абонент находится тогда,
когда у него отрицательный баланс, во всех остальных случаях он «активный». Пока
абонент активный, он может совершать звонок или отправлять смс по
фиксированным в БД ценам (важен сам факт события для конкретного абонента,
вызов rest запроса: звонок, смс), причем абонент не может совершать более 5
звонков (должно быть конфигурабельно) в сутки или производить любые действия
с отрицательным балансом.
Дополнительно должна быть возможность посмотреть «текущий баланс абонента
и статус» и функция пополнения баланса.
Ограничений по базе данных нет. Первичное заполнение абонентской базы
возможно руками. Необходимо предоставить скрипты для создания схем и таблиц БД
для проверки работоспособности приложения.
На что следует обратить внимание:
1. Сборка проекта должна производиться с помощью Maven;
2. Важно следить за структурой приложения, пакетов и доменной областью;
3. Желательно почаще делать коммиты в Git репозиторий для наглядности
развития приложения;
4. Желательно использование Hibernate в приложении;
5. Обратите внимание на разнообразие HTTP функций и кодов ответа;
6. Код должен быть покрыт юнит-тестами в разумных пределах;
7. Код должен соответствовать принципам SOLID и содержать Logger (например,
lombok).
Результат:
Результат работы – это ссылка на открытый git репозиторий, в котором находятся
исходные файлы и sql скрипты для создания и заполнения базы, проект собирается
в war-файл. В корне репозитория должен находиться readme.md с описанием
минимум 4 REST функций.


fetch('/subscriberInfo/89111111111').then(response => response.json().then(console.log))


fetch(
  '/payment', 
  { 
    method: 'PUT', 
    headers: { 'Content-Type': 'application/json' }, 
    body: JSON.stringify({ subscriber: 89222222222, pay: 20 })
  }
).then(result => result.json().then(console.log));


fetch(
  '/message', 
  { 
    method: 'POST', 
    headers: { 'Content-Type': 'application/json' }, 
    body: JSON.stringify({ sender: 89111111111, recipient: 89222222222, text: "HelloFriend" })
  }
).then(result => result.json().then(console.log));


fetch(
  '/call', 
  { 
    method: 'POST', 
    headers: { 'Content-Type': 'application/json' }, 
    body: JSON.stringify({ sender: 89222222222, recipient: 89333333333 })
  }
).then(result => result.json().then(console.log));
